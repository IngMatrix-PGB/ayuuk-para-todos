<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Números 1–10 (Mixe)</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    body { margin: 0; padding: 24px; background: #f6f7fb; }
    h1 { margin: 0 0 12px; font-size: 22px; }
    p.note { margin: 0 0 20px; color: #555; }

    .grid{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 14px;
      max-width: 1100px;
    }

    .card{
      background: white;
      border-radius: 16px;
      padding: 14px 14px 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,.08);
      border: 1px solid rgba(0,0,0,.06);
      cursor: pointer;
      user-select: none;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      display: grid;
      grid-template-rows: auto 1fr auto;
      min-height: 150px;
      position: relative;
      overflow: hidden;
    }

    .mixe{
      font-weight: 700;
      font-size: 16px;
      color: #111;
      letter-spacing: .2px;
    }

    .num{
      display: grid;
      place-items: center;
      font-weight: 900;
      font-size: 64px;
      line-height: 1;
      color: #1f3cff;
      margin: 6px 0;
      transition: transform .18s ease;
    }

    .es{
      font-size: 13px;
      color: #444;
      opacity: .9;
    }

    /* Hover effect */
    .card:hover{
      transform: scale(1.06);
      box-shadow: 0 10px 28px rgba(0,0,0,.14);
      border-color: rgba(31,60,255,.25);
    }
    .card:hover .num{
      transform: scale(1.05);
    }

    /* tiny badge */
    .badge{
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(31,60,255,.10);
      color: #1f3cff;
      border: 1px solid rgba(31,60,255,.18);
    }

    /* Mobile: add active press feedback */
    .card:active{ transform: scale(1.03); }
  </style>
</head>

<body>
  <h1>Números 1–10 (Mixe → Español)</h1>
  <p class="note">
    Pasa el puntero por un número para agrandar y reproducir sonido (en móvil: toca).
    <br>Por ahora el sonido es un “beep” generado en JS (sin audios externos).
  </p>

  <div id="grid" class="grid"></div>

  <script>
    // ✅ Cambia aquí las palabras Mixe/Español cuando ya tengas tu dataset real.
    // Dejo placeholder en Mixe para que puedas probar la UI.
    const numeros = [
      { n: 1,  mixe: "tuuk",   es: "uno" },
      { n: 2,  mixe: "mējts'k", es: "dos" },
      { n: 3,  mixe: "tēkēēk", es: "tres" },
      { n: 4,  mixe: "māītaxk", es: "cuatro" },
      { n: 5,  mixe: "mēkooxk", es: "cinco" },
      { n: 6,  mixe: "tēduik", es: "seis" },
      { n: 7,  mixe: "…",     es: "siete" },
      { n: 8,  mixe: "…",     es: "ocho" },
      { n: 9,  mixe: "…",     es: "nueve" },
      { n: 10, mixe: "…",     es: "diez" },
    ];

    // --- Beep engine (WebAudio) ---
    let audioCtx;
    function ensureAudioCtx(){
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      // iOS/Chrome: ensure running after user gesture
      if (audioCtx.state === "suspended") audioCtx.resume();
      return audioCtx;
    }

    // Beep configurable per number (solo para ver que funciona)
    function beepForNumber(num){
      const ctx = ensureAudioCtx();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();

      // frecuencia distinta por número (1..10)
      const base = 220; // A3
      const freq = base * (1 + (num-1) * 0.06);

      osc.type = "sine";
      osc.frequency.value = freq;

      // Envelope para que no truene
      const now = ctx.currentTime;
      gain.gain.setValueAtTime(0.0001, now);
      gain.gain.exponentialRampToValueAtTime(0.2, now + 0.02);
      gain.gain.exponentialRampToValueAtTime(0.0001, now + 0.22);

      osc.connect(gain);
      gain.connect(ctx.destination);

      osc.start(now);
      osc.stop(now + 0.25);
    }

    // --- Render UI ---
    const grid = document.getElementById("grid");
    let lastPlayedAt = 0;

    function createCard(item){
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <div class="badge">hover / tap</div>
        <div class="mixe">${escapeHtml(item.mixe)}</div>
        <div class="num">${item.n}</div>
        <div class="es">${escapeHtml(item.es)}</div>
      `;

      // ✅ Hover: play beep (throttle para que no se repita 1000 veces al mover el mouse)
      card.addEventListener("mouseenter", () => {
        const now = Date.now();
        if (now - lastPlayedAt > 180) {
          lastPlayedAt = now;
          beepForNumber(item.n);
        }
      });

      // ✅ Mobile + desktop click
      card.addEventListener("click", () => beepForNumber(item.n));

      return card;
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    numeros.forEach(x => grid.appendChild(createCard(x)));
  </script>
</body>
</html>
